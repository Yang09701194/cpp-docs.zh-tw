---
title: 2.4.1 for 建構 |Microsoft 文件
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-parallel
ms.topic: conceptual
dev_langs:
- C++
ms.assetid: 27d2cbce-786b-4819-91d3-d55b2cc57a5e
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: d5165c21f0bf6f2b9757550208d5e8e26a2bd3b1
ms.sourcegitcommit: 7019081488f68abdd5b2935a3b36e2a5e8c571f8
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 05/07/2018
ms.locfileid: "33693545"
---
# <a name="241-for-construct"></a>2.4.1 for 建構
**如**指示詞會識別反覆性工作共用建構，可指定相關聯的迴圈的反覆項目，則會以平行方式執行。 反覆項目**如**迴圈分散於存在於小組執行的平行建構，它會繫結的執行緒。 語法**如**建構如下所示：  
  
```  
#pragma omp for [clause[[,] clause] ... ] new-linefor-loop  
```  
  
 子句可以是下列其中一項：  
  
 **private(** *variable-list* **)**  
  
 **firstprivate(** *variable-list* **)**  
  
 **lastprivate(** *variable-list* **)**  
  
 **減少 (** *運算子* **:** *變數-清單 * * *)**  
  
 **排序**  
  
 **排程 (** *種類*[， *chunk_size*]**)**  
  
 **nowait**  
  
 **如**指示詞置於對應的結構限制**如**迴圈。 具體而言，對應**如**迴圈必須標準圖形：  
  
 **針對 (** *init expr* **;***var 邏輯 op b*;*incr-e x p * * *)**  
  
 *init expr*  
 下列其中一項：  
  
 *var* = *lb*  
  
 *整數類型 var* = *lb*  
  
 *incr expr*  
 下列其中一項：  
  
 ++*Var*  
  
 *var* ++  
  
 -- *Var*  
  
 *var* --  
  
 *var* += *incr*  
  
 *var* -= *incr*  
  
 *var* = *var* + *incr*  
  
 *var* = *incr* + *var*  
  
 *var* = *var* - *incr*  
  
 *var*  
 帶正負號的整數變數。 否則會共用此變數，如果它隱含地進行私用的持續時間**如**。   此變數不能修改主體內**如**陳述式。 除非指定這個變數**lastprivate**，迴圈是不確定之後其值。  
  
 *邏輯作業*  
 下列其中一項：  
  
 <  
  
 \<=  
  
 >  
  
 \>=  
  
 *lb*， *b*，和*incr*  
 迴圈而異的整數運算式。 沒有這些運算式的評估期間的同步處理。 因此，任何評估的副作用產生未定的結果。  
  
 請注意，使用標準形式可讓迴圈反覆項目，來計算迴圈的項目數目。 此計算會使用的型別中的值來執行*var*之後整數提升。 特別是當值*b* - *lb* + *incr*無法在型別，結果是不定，表示。 此外，如果*邏輯 op*是 < 或\<= 則*incr expr*必須造成*var*迴圈的每個反覆項目上提高。   如果*邏輯 op*是 > 或 > = 則*incr expr*必須造成*var*減少在迴圈的每個反覆項目。  
  
 **排程**子句會指定如何的反覆項目**如**迴圈會分配的小組執行緒之間。 程式的正確性不得相依於哪一個執行緒執行特定反覆項目。 值*chunk_size*，如果指定，必須是正數值迴圈而異的整數運算式。 沒有這個運算式的評估期間的同步處理。 因此，任何評估的副作用產生未定的結果。 排程*種類*可以是下列其中之一：  
  
 表 2-1**排程**子句*種類*值  
  
|||  
|-|-|  
|靜態|當**排程 (靜態、** *chunk_size * * *)** 指定反覆項目可分為區塊大小所指定的*chunk_size*。 區塊會以靜態方式指派執行緒編號順序循環配置資源方式小組中的執行緒。 若未*chunk_size*指定反覆項目空間分割成具有一個指派給每個執行緒的區塊大小，大約相同的區塊。|  
|動態|當**排程 (動態的** *chunk_size * * *)** 指定，則在反覆項目可分為區塊，每個都包含一系列*chunk_size*反覆項目。 每個區塊會指派給正在等候指派的執行緒。 執行緒執行反覆項目的區塊，然後等待其下一個作業，直到沒有區塊維持指派。 請注意，可指派的最後一個區塊可能會有較少的反覆項目。 若未*chunk_size*指定，則會預設為 1。|  
|指引|當**排程 (引導式，** *chunk_size * * *)** 指定，以減少大小的區塊中的執行緒指派反覆項目。 當執行緒完成其指派的區塊的反覆項目時，它會動態指定另一個區塊，直到沒有任何存在。 如*chunk_size*為 1，每個區塊的大小會大約未指派除以執行緒數目的反覆項目數目。 這些大小以指數方式減少大約為 1 中。 如*chunk_size*值*k*大於 1，大小減少大約以指數方式為*k*，除了最後一個區塊可能會少於*k*反覆項目。 若未*chunk_size*指定，則會預設為 1。|  
|執行階段|當**schedule （runtime)** 指定時，有關排程延後到執行階段決定。 排程*種類*和區塊大小可以選擇在執行階段，設定環境變數**OMP_SCHEDULE**。 如果未設定這個環境變數，產生的排程是由實作定義。 當**schedule （runtime)** 指定，則*chunk_size*不可指定。|  
  
 沒有明確定義**排程**子句，則預設**排程**是由實作定義。  
  
 OpenMP 相容的程式不應依賴正確執行的特定排程。 程式不應依賴排程*種類*符合精確描述上述，因為可能在相同的排程的實作會有變化*種類*跨不同的編譯器。 描述可用來選取的排程，適用於特定的情況。  
  
 **排序**子句必須要有時**排序**指示詞繫結至**如**建構。  
  
 結尾沒有隱含的屏障**如**建構，除非**nowait**指定子句。  
  
 若要限制**的**指示詞如下：  
  
-   **如**迴圈必須是結構化的區塊，而且，此外，它的執行必須不會終止**中斷**陳述式。  
  
-   值，迴圈的控制運算式**如**與相關聯的迴圈**如**指示詞必須是相同的小組中的所有執行緒。  
  
-   **如**迴圈反覆運算變數必須具有帶正負號的整數類型。  
  
-   只有一個**排程**子句可以出現在**如**指示詞。  
  
-   只有一個**排序**子句可以出現在**如**指示詞。  
  
-   只有一個**nowait**子句可以出現在**如**指示詞。  
  
-   如果未指定，或任一邊效果內的頻率*chunk_size*， *lb*， *b*，或*incr*出現運算式。  
  
-   值*chunk_size*運算式必須是相同的小組中的所有執行緒。  
  
## <a name="cross-references"></a>交叉參考：  
  
-   **私用**， **firstprivate**， **lastprivate**，和**減少**子句，請參閱[區段 2.7.2](../../parallel/openmp/2-7-2-data-sharing-attribute-clauses.md)在 25 頁面上。  
  
-   **OMP_SCHEDULE**環境變數，請參閱[第 4.1 節](../../parallel/openmp/4-1-omp-schedule.md)在 48 頁面上。  
  
-   **排序**建構，請參閱[區段 2.6.6](../../parallel/openmp/2-6-6-ordered-construct.md) 22 頁面上。  
  
-   [附錄 D](../../parallel/openmp/d-using-the-schedule-clause.md)，93，頁面上提供使用排程子句的詳細資訊。